{% extends "layout.html" %}

{% block title %}작업 생산성{% endblock %}

{% block head %}
<link rel="stylesheet" href="./static/css/tables.css">  
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"/>
{% endblock %}

{% block content %}
<div id="bodyContent" style="margin-bottom:100px;">
  <div>
    <div id="bgtables">
      <h1 class="content-title">작업 생산성</h1>
    </div>

    <!-- <img src="./static/img/premier/footlogo.png" alt="" style="width:100px;margin-left: 100px;margin-top:10px;margin-bottom:10px"> -->

    <div id="scores">
        <label for="" style="">Rank</label>  
        <label for="" style="">현장</label>
        <label for="" style="">총괄이름</label>
        <label for="" style="">Total</label>
        <label for="">G</label>
        <label for="">C</label>
        <label for="">A</label>
        <label for="">L</label>
    </div>
  </div>
</div>
{% endblock %}

{% block script %}
<script>
  document.getElementById('nav_productivity').classList.add('active');

  async function teams() {
    var res = await fetch("./static/data/ranktable.json");
    var data = await res.json();

    console.log(data);

    let records  = data;
    console.log('records',records);

    var displayScore = document.getElementById("bodyContent");
    for (var i = 0; i < records.length; i++) {
      console.log(records[i]);
      console.log(i);

      var div = document.createElement("div");
      div.setAttribute("id", "scoreDetails");
      div.setAttribute("style", "margin-bottom:10px;");
      div.innerHTML = `
        <span style='font-size:14px;'>&#8744;</span>
        <label id="lbl1"> 
          ${[i + 1]}&nbsp;&nbsp;•
        </label> 
        <label id="lbl2">
          <img src="./static/img/premier/img_icon${i + 1}.png" style="float:left;margin-right:15px;padding-bottom:20px; width:25px"/> 
          <span>${records[i].현장}</span>
        </label>
        <label id="lbl3">${records[i]['총괄 이름']}</label>
        <label id="lbl4">${records[i].Total}</label>
        <label id="lbl5">${records[i].A}</label>
        <label id="lbl6">${records[i].C}</label>
        <label id="lbl7">${records[i].G}</label>
        <label id="lbl8">${records[i].L}</label>
        <label id="lbl10">
          <img src="./static/img/premier/rank${i + 1}.png" width:25px/>
        </label>
      `;

      displayScore.appendChild(div);
    }
  }
  teams();    
</script>
{% endblock %}